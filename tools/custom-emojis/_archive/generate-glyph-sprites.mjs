// Generates a clean glyph_E3.png with hand-drawn pixel art sprites
// based on the Java chat screenshot reference.
// Run with: node tools/custom-emojis/generate-glyph-sprites.mjs

import fs from "node:fs";

const WIDTH = 256;
const HEIGHT = 256;
const CELL = 16;

// RGBA buffer (256x256 = 65536 pixels * 4 bytes)
const pixels = new Uint8Array(WIDTH * HEIGHT * 4);

function setPixel(x, y, r, g, b, a = 255) {
	if (x < 0 || x >= WIDTH || y < 0 || y >= HEIGHT) return;
	const i = (y * WIDTH + x) * 4;
	pixels[i] = r;
	pixels[i + 1] = g;
	pixels[i + 2] = b;
	pixels[i + 3] = a;
}

function drawInCell(cellCol, cellRow, pattern, color = [255, 255, 255]) {
	// pattern is array of strings, each char: '#' = pixel, '.' = transparent
	const baseX = cellCol * CELL;
	const baseY = cellRow * CELL;
	const [r, g, b] = color;

	// Center the pattern in the cell
	const patH = pattern.length;
	const patW = pattern[0]?.length || 0;
	const offX = Math.floor((CELL - patW) / 2);
	const offY = Math.floor((CELL - patH) / 2);

	for (let py = 0; py < patH; py++) {
		const row = pattern[py] || "";
		for (let px = 0; px < row.length; px++) {
			if (row[px] === "#") {
				setPixel(baseX + offX + px, baseY + offY + py, r, g, b, 255);
			}
		}
	}
}

// Sprite definitions (pixel art ~7-9px wide, will be centered in 16x16 cell)
// Based on Java chat screenshot reference
// Cell address: E3RC where R=row (0-F), C=column (0-F)

const sprites = {
	// === ROW 0 (0x) ===
	// Cell 02: ☠ Skull
	"02": [
		"..####..",
		".#....#.",
		"#.#..#.#",
		"#......#",
		"#.#..#.#",
		".#....#.",
		"..####..",
		"..#..#..",
	],
	// Cell 03: ☮ Peace
	"03": [
		"..####..",
		".#..#.#.",
		"#...#..#",
		"#...#..#",
		"#..#.#.#",
		"#.#...#.",
		".#....#.",
		"..####..",
	],
	// Cell 04: ☯ Yin-Yang
	"04": [
		"..####..",
		".##..##.",
		"###...#.",
		"##.#..#.",
		"#..#.##.",
		".#...###",
		".##..##.",
		"..####..",
	],

	// === ROW 1 (1x) ===
	// Cell 1C: ♠ Spade (solid)
	"1C": [
		"....#...",
		"...###..",
		"..#####.",
		".#######",
		".#######",
		"...###..",
		"....#...",
		"...###..",
	],
	// Cell 1D: ♤ Spade (outline)
	"1D": [
		"....#...",
		"...#.#..",
		"..#...#.",
		".#.....#",
		".#.....#",
		"..#...#.",
		"...#.#..",
		"...###..",
	],
	// Cell 1E: ♣ Club (solid)
	"1E": [
		"...###..",
		"..#####.",
		"...###..",
		"##.###.#",
		"#########",
		"##.###.#",
		"....#...",
		"...###..",
	],
	// Cell 1F: ♧ Club (outline)
	"1F": [
		"...###..",
		"..#...#.",
		"...###..",
		".#.....#",
		"#.......#",
		".#.....#",
		"...#.#..",
		"...###..",
	],

	// === ROW 2 (2x) ===
	// Cell 20: ♥ Heart (solid)
	"20": [
		".##..##.",
		"########",
		"########",
		"########",
		".######.",
		"..####..",
		"...##...",
		"....#...",
	],
	// Cell 21: ♡ Heart (outline)
	"21": [
		".##..##.",
		"#..##..#",
		"#......#",
		"#......#",
		".#....#.",
		"..#..#..",
		"...##...",
		"....#...",
	],
	// Cell 22: ♦ Diamond (solid)
	"22": [
		"....#...",
		"...###..",
		"..#####.",
		".#######",
		"..#####.",
		"...###..",
		"....#...",
	],
	// Cell 23: ♢ Diamond (outline)
	"23": [
		"....#...",
		"...#.#..",
		"..#...#.",
		".#.....#",
		"..#...#.",
		"...#.#..",
		"....#...",
	],
	// Cell 24: ♔ King Crown
	"24": [
		".#.#.#..",
		".#.#.#..",
		".######.",
		"..####..",
		"..####..",
		".######.",
	],
	// Cell 25: ♕ Queen Crown
	"25": [
		"#..#..#.",
		".#.#.#..",
		".#####..",
		"..###...",
		"..###...",
		".#####..",
	],
	// Cell 26: ♚ King (alt)
	"26": [
		"...#....",
		"..###...",
		"...#....",
		".#####..",
		".#####..",
		".#####..",
	],
	// Cell 27: ♛ Queen (alt)
	"27": [
		".#.#.#..",
		"..###...",
		"..###...",
		".#####..",
		".#####..",
	],
	// Cell 28: ★ Star (solid)
	"28": [
		"....#...",
		"...###..",
		".#######",
		"..#####.",
		"..#.#...",
		".#...#..",
	],
	// Cell 29: ☆ Star (outline)
	"29": [
		"....#...",
		"...#.#..",
		"#.#...#.",
		".#.#.#.#",
		"..#.#...",
		".#...#..",
	],
	// Cell 2A: ☾ Crescent Moon Left
	"2A": [
		"..####..",
		".##.....",
		"##......",
		"##......",
		"##......",
		".##.....",
		"..####..",
	],
	// Cell 2B: ☽ Crescent Moon Right
	"2B": [
		"..####..",
		".....##.",
		"......##",
		"......##",
		"......##",
		".....##.",
		"..####..",
	],
	// Cell 2C: ☼ Sun with rays
	"2C": [
		"#...#...",
		".#.#.#..",
		"..###...",
		"#######.",
		"..###...",
		".#.#.#..",
		"#...#...",
	],
	// Cell 2D: ☀ Sun (solid)
	"2D": [
		"..#.#...",
		"#.###.#.",
		".#####..",
		"#######.",
		".#####..",
		"#.###.#.",
		"..#.#...",
	],
	// Cell 2E: ☁ Cloud
	"2E": [
		"..##....",
		".####...",
		"##.####.",
		"########",
	],
	// Cell 2F: ☂ Umbrella
	"2F": [
		"..####..",
		".######.",
		"########",
		"...#....",
		"...#....",
		"#..#....",
		".##.....",
	],

	// === ROW 3 (3x) ===
	// Cell 30: ☃ Snowman
	"30": [
		"..###...",
		"..#.#...",
		"..###...",
		".#####..",
		".#...#..",
		".#####..",
	],
	// Cell 31: ☻ Smiley (solid/inverted)
	"31": [
		"..####..",
		".######.",
		"#.#..#.#",
		"########",
		"#.#..#.#",
		"#..##..#",
		".######.",
		"..####..",
	],
	// Cell 32: ☺ Smiley (outline)
	"32": [
		"..####..",
		".#....#.",
		"#.#..#.#",
		"#......#",
		"#.#..#.#",
		"#..##..#",
		".#....#.",
		"..####..",
	],
	// Cell 33: ☹ Sad face
	"33": [
		"..####..",
		".#....#.",
		"#.#..#.#",
		"#......#",
		"#..##..#",
		"#.#..#.#",
		".#....#.",
		"..####..",
	],
	// Cell 34: ❀ Flower
	"34": [
		"..#.#...",
		".#####..",
		"###.###.",
		".#####..",
		"..#.#...",
		"...#....",
		"...#....",
	],
	// Cell 35: ✿ Flower (alt)
	"35": [
		"..###...",
		".##.##..",
		"##...##.",
		".##.##..",
		"..###...",
		"...#....",
	],
	// Cell 36: ♪ Music note
	"36": [
		"...###..",
		"...#..#.",
		"...#....",
		"...#....",
		"..##....",
		".###....",
		".##.....",
	],
	// Cell 37: ♫ Double note
	"37": [
		"..#####.",
		"..#...#.",
		"..#...#.",
		"..#...#.",
		".##..##.",
		"###.###.",
		".##..##.",
	],
	// Cell 38: ✦ 4-pointed star (solid)
	"38": [
		"...#....",
		"...#....",
		"..###...",
		"#######.",
		"..###...",
		"...#....",
		"...#....",
	],
	// Cell 39: ✧ 4-pointed star (outline)
	"39": [
		"...#....",
		"...#....",
		"..#.#...",
		"##...##.",
		"..#.#...",
		"...#....",
		"...#....",
	],
	// Cell 3A: ∞ Infinity
	"3A": [
		".##..##.",
		"#..##..#",
		"#..##..#",
		".##..##.",
	],
	// Cell 3B: ❤ Heart (filled, red-style)
	"3B": [
		".##..##.",
		"########",
		"########",
		".######.",
		"..####..",
		"...##...",
	],
	// Cell 3C: ✖ X mark (bold)
	"3C": [
		"##....##",
		".##..##.",
		"..####..",
		"...##...",
		"..####..",
		".##..##.",
		"##....##",
	],
	// Cell 3D: ✗ X mark (thin)
	"3D": [
		"#......#",
		".#....#.",
		"..#..#..",
		"...##...",
		"..#..#..",
		".#....#.",
		"#......#",
	],
	// Cell 3E: ● Circle (solid)
	"3E": [
		"..####..",
		".######.",
		"########",
		"########",
		"########",
		".######.",
		"..####..",
	],
	// Cell 3F: ○ Circle (outline)
	"3F": [
		"..####..",
		".#....#.",
		"#......#",
		"#......#",
		"#......#",
		".#....#.",
		"..####..",
	],

	// === ROW 4 (4x) ===
	// Cell 40: ▲ Triangle up (solid)
	"40": [
		"....#...",
		"...###..",
		"..#####.",
		".#######",
		"########",
	],
	// Cell 41: △ Triangle up (outline)
	"41": [
		"....#...",
		"...#.#..",
		"..#...#.",
		".#.....#",
		"########",
	],
	// Cell 42: ▼ Triangle down (solid)
	"42": [
		"########",
		".#######",
		"..#####.",
		"...###..",
		"....#...",
	],
	// Cell 43: ▽ Triangle down (outline)
	"43": [
		"########",
		".#.....#",
		"..#...#.",
		"...#.#..",
		"....#...",
	],
	// Cell 44: ◆ Diamond (solid)
	"44": [
		"...#....",
		"..###...",
		".#####..",
		"#######.",
		".#####..",
		"..###...",
		"...#....",
	],
	// Cell 45: ◇ Diamond (outline)
	"45": [
		"...#....",
		"..#.#...",
		".#...#..",
		"#.....#.",
		".#...#..",
		"..#.#...",
		"...#....",
	],
	// Cell 46: ■ Square (solid)
	"46": [
		"########",
		"########",
		"########",
		"########",
		"########",
		"########",
		"########",
	],
	// Cell 47: □ Square (outline)
	"47": [
		"########",
		"#......#",
		"#......#",
		"#......#",
		"#......#",
		"#......#",
		"########",
	],
	// Cell 48: ☢ Radiation
	"48": [
		"...##...",
		"..#..#..",
		".#.##.#.",
		".##..##.",
		".#.##.#.",
		"..#..#..",
		"...##...",
	],
	// Cell 49: ☣ Biohazard
	"49": [
		"...##...",
		"..####..",
		".##..##.",
		"###..###",
		".##..##.",
		"..####..",
		"...##...",
	],
};

// Draw all sprites
for (const [cell, pattern] of Object.entries(sprites)) {
	const col = parseInt(cell[1], 16);
	const row = parseInt(cell[0], 16);
	drawInCell(col, row, pattern);
}

// Write raw RGBA to temp file, then use PowerShell to convert to PNG
const rawPath = "c:/Users/anthe/Desktop/Desarrollo/tools/custom-emojis/glyph_raw.bin";
fs.writeFileSync(rawPath, pixels);

console.log(`Wrote raw RGBA data (${pixels.length} bytes) to ${rawPath}`);
console.log("Now run the PowerShell script to convert to PNG.");
